"use strict";(self.webpackChunkshogun_demo_client=self.webpackChunkshogun_demo_client||[]).push([[592],{13230:function(e,t,n){var a=n(67294),r=n(38648),l=n(89858),o=n(76772),i=n(17699),s=n(67502),c=n(87617),u=n.n(c),d=n(65920),m=n(68734),p=n(41666),g=n(12827),f=n(26414),y=n(97260),h=n(14409),E=n(59090),b=n(73935),v=n(95998),w=n(12038),L=n.n(w),P=n(92212),k=n.n(P),S=n(67624),M=n(6653),Z=n.n(M),F=n(41907),C=n.n(F),A=n(12592),T=n(71577),O=n(23057),I=n(29127),x=n(74187),j=n(64478),N=n(83687),D=n(80815);var R=()=>(0,v.I0)();const _=v.v9;var z=_,B=n(35304);const K=(0,B.oM)({name:"addLayerModal",initialState:{visible:!1},reducers:{show(e){e.visible=!0},hide(e){e.visible=!1},toggle(e){e.visible=!e.visible}}}),{show:V,hide:$,toggle:G}=K.actions;var W=K.reducer;const U=(0,B.oM)({name:"toolMenu",initialState:{selectedKeys:[]},reducers:{setSelectedKey(e,t){e.selectedKeys.push(t.payload)},unsetSelectedKey(e,t){e.selectedKeys=e.selectedKeys.filter((e=>e!==t.payload))}}}),{setSelectedKey:H,unsetSelectedKey:q}=U.actions;var J=U.reducer,X=n(93379),Y=n.n(X),Q=n(7795),ee=n.n(Q),te=n(90569),ne=n.n(te),ae=n(3565),re=n.n(ae),le=n(19216),oe=n.n(le),ie=n(44589),se=n.n(ie),ce=n(6192),ue={};ue.styleTagTransform=se(),ue.setAttributes=re(),ue.insert=ne().bind(null,"head"),ue.domAPI=ee(),ue.insertStyleElement=oe();Y()(ce.Z,ue),ce.Z&&ce.Z.locals&&ce.Z.locals;function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},de.apply(this,arguments)}var me=({...e})=>{const[t,n]=(0,a.useState)(!1),[l,o]=(0,a.useState)([]),[i,s]=(0,a.useState)([]),[c,u]=(0,a.useState)("https://sgx.geodatenzentrum.de/wms_topplus_open?request=GetCapabilities&service=wms"),d=z((e=>e.addLayerModal.visible)),p=R(),g=(0,D.useMap)(),{t:f}=(0,j.$)(),y=()=>{s([]),o([]),p($()),p(q("addLayer"))},h=e=>{if(!g)return;const t=f("AddLayerModal.externalWmsFolder");let n=N.Ci.getLayerByName(g,t);if(!n){n=new m.default,n.set("name",t);const e=g.getLayerGroup().getLayers();e.insertAt(e?.getLength()||0,n)}e.forEach((e=>{n.getLayers().getArray().includes(e)||(e.set("isExternalLayer",!0),n.getLayers().push(e))})),n.set("hideInLayerTree",n.getLayers().getLength()<1),y()};return a.createElement(A.default,de({className:"add-layer-modal",title:f("AddLayerModal.title"),visible:d,onCancel:y,footer:[a.createElement(T.default,{key:"add-selected",disabled:i?.length<1,onClick:()=>{const e=l.filter((e=>i.includes((0,x.getUid)(e))));h(e)}},f("AddLayerModal.addSelectedLayers")),a.createElement(T.default,{key:"add-all",disabled:l?.length<1,onClick:()=>{h(l)}},f("AddLayerModal.addAllLayers"))]},e),a.createElement(O.default.Search,{placeholder:f("AddLayerModal.inputPlaceholder"),value:c,onChange:e=>{u(e.target.value)},onSearch:async e=>{try{n(!0);const t=await N.X9.getWmsCapabilities(e),a=N.X9.getLayersFromWmsCapabilities(t,"Title");o(a)}catch(e){r.Z.error({message:f("AddLayerModal.errorMessage"),description:f("AddLayerModal.errorDescription")})}finally{n(!1)}},enterButton:!0}),a.createElement(I.default,{loading:t,columns:[{title:f("AddLayerModal.columnTitle"),render:(e,t)=>t.get("title")}],rowKey:e=>(0,x.getUid)(e),rowSelection:{selectedRowKeys:i,onChange:s},pagination:!1,dataSource:l}))},pe=n(7294);function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ge.apply(this,arguments)}var fe=({...e})=>{const t=(0,D.default)();return t?a.createElement(pe.default,ge({map:t},e)):a.createElement(a.Fragment,null)},ye=n(27049),he=n(4540),Ee=n(37494),be=n(91900),ve=n(26954),we=n(78415),Le={};Le.styleTagTransform=se(),Le.setAttributes=re(),Le.insert=ne().bind(null,"head"),Le.domAPI=ee(),Le.insertStyleElement=oe();Y()(we.Z,Le),we.Z&&we.Z.locals&&we.Z.locals;function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pe.apply(this,arguments)}var ke=({...e})=>{const{t:t}=(0,j.$)(),n=(0,D.default)();(0,a.useEffect)((()=>{if(!n)return;const e=n.getControls().getArray().find((e=>e instanceof Ee.Z));e||n.addControl(new Ee.Z({target:"scale-line-container"}))}),[n]),(0,a.useEffect)((()=>{if(!n)return;const e=n.getControls().getArray().find((e=>e instanceof he.Z));e||n.addControl(new he.Z({coordinateFormat:(0,be.createStringXY)(2),projection:"EPSG:25832",undefinedHTML:"&nbsp;",target:"mouse-position"}))}),[n]);return n?a.createElement("div",Pe({className:"footer"},e),a.createElement("div",{className:"item-container left-items"},a.createElement("div",{id:"scale-line-container"}),a.createElement(ye.Z,{type:"vertical"}),t("Footer.scale"),":",a.createElement(ve.default,{map:n}),a.createElement(ye.Z,{type:"vertical"}),a.createElement("div",null,t("Footer.refSystem"),": ",n.getView().getProjection().getCode()),a.createElement(ye.Z,{type:"vertical"}),a.createElement("div",null,t("Footer.mousePosition"),":"),a.createElement("div",{id:"mouse-position",className:"mouse-position"})),a.createElement("div",{className:"item-container right-items"},a.createElement(T.default,{onClick:()=>{window.open("https://www.terrestris.de/de/kontakt/","_blank")},type:"link"},t("Footer.contact")),a.createElement(T.default,{onClick:()=>{window.open("https://www.terrestris.de/de/impressum/","_blank")},type:"link"},t("Footer.imprint")),a.createElement(T.default,{onClick:()=>{window.open("https://www.terrestris.de/de/datenschutzerklaerung/","_blank")},type:"link"},t("Footer.privacypolicy")))):a.createElement(a.Fragment,null)},Se=n(43985);function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Me.apply(this,arguments)}var Ze=({...e})=>{const t=(0,D.default)(),{t:n}=(0,j.$)();return t?a.createElement(Se.default,Me({map:t,countryCodes:"",allowClear:!0,nominatimBaseUrl:"https://nominatim.terrestris.de/search.php?",placeholder:n("Nominatim.placeholder")},e)):a.createElement(a.Fragment,null)},Fe=n(62923),Ce={};Ce.styleTagTransform=se(),Ce.setAttributes=re(),Ce.insert=ne().bind(null,"head"),Ce.domAPI=ee(),Ce.insertStyleElement=oe();Y()(Fe.Z,Ce),Fe.Z&&Fe.Z.locals&&Fe.Z.locals;function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ae.apply(this,arguments)}var Te=({...e})=>{const t=_((e=>e.title)),n=_((e=>e.logoPath));return a.createElement("div",Ae({className:"header"},e),a.createElement("div",{className:"item-container left-items"},a.createElement("img",{className:"logo",src:n}),a.createElement("div",{className:"title"},t)),a.createElement("div",{className:"item-container center-items"},a.createElement(Ze,null)),a.createElement("div",{className:"item-container right-items"}))},Oe=n(51436),Ie=n(17625),xe=n(460),je=n(73345),Ne=n(54388),De=n(63485);function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Re.apply(this,arguments)}var _e=({printManager:e,value:t,id:n,placeholder:r,maxLength:l,...o})=>{const[i,s]=(0,a.useState)(t);return(0,a.useEffect)((()=>{e&&n&&(e.customParams[n]=i)}),[e,i,n]),(0,a.useEffect)((()=>{s(t)}),[t]),a.createElement(O.default,Re({id:n,value:i,onChange:e=>s(e.target.value),placeholder:r,maxLength:l,showCount:!!(l&&l>1)},o))},ze=n(76647);function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Be.apply(this,arguments)}var Ke=({printManager:e,placeholder:t="Bitte wÃ¤hlen Sie eine Vorlage aus",value:n,...r})=>{const[l,o]=(0,a.useState)(n);return(0,a.useEffect)((()=>{e&&e.setLayout(l)}),[e,l]),(0,a.useEffect)((()=>{o(n)}),[n]),a.createElement(ze.default,Be({placeholder:t,value:l,onChange:o},r),e?.getLayouts().map((e=>a.createElement(ze.default.Option,{key:e.name,value:e.name},e.name))))};function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ve.apply(this,arguments)}var $e=({printManager:e,placeholder:t,value:n,outputFormats:r,...l})=>{const[o,i]=(0,a.useState)(n);return(0,a.useEffect)((()=>{e&&e.setOutputFormat(o)}),[e,o]),(0,a.useEffect)((()=>{i(n)}),[n]),a.createElement(ze.default,Ve({placeholder:t,value:o,onChange:i},l),r.map((e=>a.createElement(ze.default.Option,{key:e,value:e},e.toLocaleUpperCase()))))};function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ge.apply(this,arguments)}var We=({printManager:e,placeholder:t,value:n,...r})=>{const[l,o]=(0,a.useState)(n);return(0,a.useEffect)((()=>{e&&e.setDpi(l)}),[e,l]),(0,a.useEffect)((()=>{o(n)}),[n]),a.createElement(ze.default,Ge({placeholder:t,value:l,onChange:o},r),e?.getDpis().map((e=>a.createElement(ze.default.Option,{key:e,value:e},`${e} DPI`))))},Ue=n(87650),He={};He.styleTagTransform=se(),He.setAttributes=re(),He.insert=ne().bind(null,"head"),He.domAPI=ee(),He.insertStyleElement=oe();Y()(Ue.Z,He),Ue.Z&&Ue.Z.locals&&Ue.Z.locals;function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qe.apply(this,arguments)}var Je=({layerBlackList:e=[],map:t,printManager:n,...r})=>{const[l]=De.Z.useForm(),{t:i}=(0,j.$)(),[s,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)(null),p=n=>{const a=n.get("name"),r=!e.includes(a),l=!n.get("hideLegendInPrint"),o=n.getVisible()&&Ne.default.layerInResolutionRange(n,t),i=!(n instanceof m.default);if(r&&l&&o&&i){const e=t.getView().getResolution();return e&&n.set("customPrintLegendParams",{SCALE:Ne.default.getScaleForResolution(e,"m")}),!0}return!1},g=async()=>{n.legendFilter=p,n.customParams.printLegend=!1};if(!n?.isInitiated())return a.createElement(a.Fragment,null);return a.createElement("div",{className:"print"},u&&a.createElement(o.Z,{className:"print-alert",message:u,type:"error",closable:!0,showIcon:!0,onClose:()=>{d(null)}}),a.createElement(De.Z,qe({form:l,className:"print-form",layout:"horizontal"},{labelCol:{span:8},wrapperCol:{span:16}},r),a.createElement(De.Z.Item,{name:"title",label:i("PrintForm.title"),initialValue:i("PrintForm.initialTitle")},a.createElement(_e,{maxLength:50,printManager:n,placeholder:i("PrintForm.titlePlaceholder")})),a.createElement(De.Z.Item,{name:"comment",label:i("PrintForm.comment")},a.createElement(_e,{maxLength:200,printManager:n,placeholder:i("PrintForm.commentPlaceholder")})),a.createElement(De.Z.Item,{name:"layout",label:i("PrintForm.layout"),initialValue:n?.getLayouts()[0]?.name},a.createElement(Ke,{printManager:n})),a.createElement(De.Z.Item,{name:"dpi",label:i("PrintForm.dpi"),initialValue:72},a.createElement(We,{printManager:n,placeholder:i("PrintForm.resolutionPlaceholder")})),a.createElement(De.Z.Item,{name:"format",label:i("PrintForm.format"),initialValue:"pdf"},a.createElement($e,{printManager:n,outputFormats:["pdf","jpg","png"],placeholder:i("PrintForm.outputFormatPlaceholder")}))),a.createElement(T.default,{className:"print-button tool-menu-button",disabled:!n?.isInitiated(),icon:a.createElement(Ie.FontAwesomeIcon,{icon:Oe.q7m}),loading:s,onClick:async()=>{try{d(null),c(!0),await g();const e=await n.print(!1);if(!e)throw new Error("No download URL available, the job has failed.");window.open(e)}catch(e){d(i("PrintForm.printJobErrorMsg")),L().error(e)}finally{c(!1)}}},i("PrintForm.downloadBtnText")))},Xe=n(3028),Ye=n(42833),Qe=n(93893),et=n(97491),tt=n(61580),nt=n(20640),at=n.n(nt),rt=n(49466),lt=n(92371),ot=n(30933),it=n(30283),st=n(51345),ct=n(58958),ut=n(47539),dt=n(55384),mt=n(21922),pt=n(86092),gt={};gt.styleTagTransform=se(),gt.setAttributes=re(),gt.insert=ne().bind(null,"head"),gt.domAPI=ee(),gt.insertStyleElement=oe();Y()(pt.Z,gt),pt.Z&&pt.Z.locals&&pt.Z.locals;function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ft.apply(this,arguments)}var yt=({features:e,layerName:t="Unknown layer",...n})=>{const[r,l]=(0,a.useState)(),[o,i]=(0,a.useState)(),s=(0,dt.useMap)(),{t:c}=(0,j.$)(),u=`selection-layer-${t}`;return(0,a.useEffect)((()=>{if(!s)return;return(()=>{if(Ne.default.getLayerByName(s,u))return;const t=new ot.default({features:e}),n=new st.default({color:"rgba(255, 255, 255, 0.15)"}),a=new ct.default({color:"rgba(209, 70, 47, 1)",width:2}),r=new ut.default({fill:n,stroke:a,image:new it.default({radius:5,fill:n,stroke:a})}),l=new lt.default({source:t,style:r});l.set("name",u),s.addLayer(l)})(),()=>(()=>{const e=Ne.default.getLayerByName(s,u);e&&s.removeLayer(e)})()}),[s]),(0,a.useEffect)((()=>{if(!s)return;const t=Ne.default.getLayerByName(s,u);t&&(t.getSource()?.clear(),l(1),e.length>0&&i(e[0]))}),[e,s]),(0,a.useEffect)((()=>{if(!o||!s)return;const e=Ne.default.getLayerByName(s,u);e&&(e.getSource()?.clear(),e.getSource()?.addFeature(o))}),[o,s]),o?a.createElement(a.Fragment,null,a.createElement("div",{className:"property-grid-header"},t&&a.createElement("span",null,t),a.createElement("div",{className:"right-elements"},a.createElement(et.Z,{simple:!0,total:e.length,size:"small",pageSize:1,current:r,onChange:t=>{l(t),i(e[t-1])}}),a.createElement(tt.default,{title:"Copy to clipboard"},a.createElement(T.default,{type:"primary",onClick:()=>{at()((new rt.default).writeFeature(o))},icon:a.createElement(Ie.FontAwesomeIcon,{icon:Oe.kZ_})})))),a.createElement(mt.default,ft({feature:o,size:"small",sticky:!0,columns:[{title:"Key",dataIndex:"attributeName",key:"attributeName",width:"50%",ellipsis:!0,defaultSortOrder:"ascend",sorter:(e,t)=>e.key.localeCompare(t.key)},{title:"Value",dataIndex:"attributeValue",key:"attributeValue",width:"50%",ellipsis:!0}],scroll:{y:Object.keys(o.getProperties()).length>6?250:void 0}},n))):a.createElement(a.Fragment,null)},ht=n(16813),Et={};Et.styleTagTransform=se(),Et.setAttributes=re(),Et.insert=ne().bind(null,"head"),Et.domAPI=ee(),Et.insertStyleElement=oe();Y()(ht.Z,Et),ht.Z&&ht.Z.locals&&ht.Z.locals;function bt(){return bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bt.apply(this,arguments)}var vt=({enabled:e,...t})=>{const{t:n}=(0,j.$)(),r=(0,D.useMap)();if(!r)return a.createElement(a.Fragment,null);const l=Ne.default.getAllLayers(r).filter((e=>!!e.get("hoverable")&&(e instanceof Xe.default&&e.getSource()instanceof Ye.default||e instanceof p.default&&e.getSource()instanceof h.default)));return e?a.createElement("div",{className:"feature-info-panel"},a.createElement(Qe.default,bt({featureCount:10,map:r,queryLayers:l,resultRenderer:e=>{const t=e.features,r=e.loading;return 0===Object.keys(t).length?a.createElement("span",{className:"usage-hint"},n("FeatureInfo.usageHint")):Object.entries(t).map((([e,t])=>a.createElement("div",{key:e},a.createElement(yt,{features:t,layerName:e,loading:r}))))}},t))):a.createElement(a.Fragment,null)},wt=n(64289),Lt=n(68112),Pt=n(97979),kt=n(11382),St=n(51530),Mt=n(86954);function Zt(){return Zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zt.apply(this,arguments)}var Ft=({layer:e,visibleLegendsIds:t,setVisibleLegendsIds:n,...l})=>{const[o,i]=(0,a.useState)(!1),[s,c]=(0,a.useState)(!1),u=(0,D.useMap)(),{t:d}=(0,j.$)(),m=async()=>{if(u){c(!0);try{let t=await Mt.default.getExtentForLayer(e);t=(0,f.transformExtent)(t,"EPSG:4326",u.getView().getProjection()),u.getView().fit(t)}catch(e){L().error(e),r.Z.error({message:d("LayerTreeContextMenu.extentError")})}finally{c(!1)}}},p=()=>{if(!u)return;const t=d("LayerTree.externalWmsFolder"),n=Ne.default.getLayerByName(u,t);if(n){const t=n.getLayers();try{1===t.getLength()&&n.set("hideInLayerTree",!0),t.remove(e)}catch(e){L().error("Could not remove external layer from map.")}}};let g=[{label:a.createElement(kt.default,{spinning:s},d("LayerTreeContextMenu.layerZoomToExtent")),key:"zoomToExtent"}];const y=t.includes((0,x.getUid)(e));e.getVisible()&&g.push({label:d(y?"LayerTreeContextMenu.hideLegend":"LayerTreeContextMenu.showLegend"),key:"toggleLegend"}),e.get("isExternalLayer")&&g.push({label:d("LayerTreeContextMenu.removeLayer"),key:"removeExternal"});const h=a.createElement(xe.Z,{items:g,selectable:!1,onClick:a=>{switch(a?.key){case"zoomToExtent":m();break;case"removeExternal":p();break;case"toggleLegend":const a=(0,x.getUid)(e),r=[...t];r.includes(a)?r.splice(r.indexOf(a),1):r.push(a),n(r)}i(!1)}});return a.createElement(St.default,Zt({overlay:h,placement:"bottomLeft",onVisibleChange:i,visible:o,trigger:["click"]},l),a.createElement(Ie.FontAwesomeIcon,{icon:Oe.iV1}))},Ct=n(79770),At={};At.styleTagTransform=se(),At.setAttributes=re(),At.insert=ne().bind(null,"head"),At.domAPI=ee(),At.insertStyleElement=oe();Y()(Ct.Z,At),Ct.Z&&Ct.Z.locals&&Ct.Z.locals;function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tt.apply(this,arguments)}var Ot=({...e})=>{const t=(0,D.useMap)(),{t:n}=(0,j.$)(),[r,l]=(0,a.useState)([]);return t?a.createElement(wt.default,Tt({className:"layertree",map:t,nodeTitleRenderer:e=>{if(!t)return;const o=t.getView(),i=o.getProjection().getUnits()||"m",s=o.getResolution(),c=s?Ne.default.getScaleForResolution(s,i):void 0;return e instanceof m.default?a.createElement("div",null,e.get("name")):a.createElement(a.Fragment,null,a.createElement("div",{className:"tree-node-header"},a.createElement("span",null,e.get("name")),a.createElement(Ft,{layer:e,visibleLegendsIds:r,setVisibleLegendsIds:l})),e.get("visible")&&a.createElement(a.Fragment,null,a.createElement("div",{className:"layer-transparency"},a.createElement(Pt.default,{tipFormatter:e=>`${n("LayerTree.transparency")}: ${e}%`,layer:e}))),e.get("visible")&&r.includes((0,x.getUid)(e))&&a.createElement(Lt.default,{layer:e,errorMsg:n("LayerTree.noLegendAvailable"),extraParams:{scale:c,LEGEND_OPTIONS:"fontAntiAliasing:true;forceLabels:on",TRANSPARENT:!0}}))},filterFunction:e=>e instanceof m.default?!e.get("hideInLayerTree"):!(e.get("isBackgroundLayer")||e.getSource&&e.getSource()instanceof ot.default),draggable:{icon:!1}},e)):a.createElement(a.Fragment,null)},It=n(85214),xt=n(56479),jt=n(85415),Nt={};Nt.styleTagTransform=se(),Nt.setAttributes=re(),Nt.insert=ne().bind(null,"head"),Nt.domAPI=ee(),Nt.insertStyleElement=oe();Y()(jt.Z,Nt),jt.Z&&jt.Z.locals&&jt.Z.locals;var Dt=()=>{const{t:e}=(0,j.$)(),t=(0,D.useMap)();return t?a.createElement(xt.default,null,a.createElement(It.default,{geodesic:!0,name:"line",map:t,measureType:"line",type:"link",continueLineMsg:e("Measure.clicktodrawline")},a.createElement(Ie.FontAwesomeIcon,{icon:Oe.SoD}),a.createElement("span",{className:"measure-text"},e("Measure.line"))),a.createElement(It.default,{geodesic:!0,name:"poly",map:t,measureType:"polygon",type:"link",continuePolygonMsg:e("Measure.clicktodrawarea")},a.createElement(Ie.FontAwesomeIcon,{icon:Oe.ubJ}),a.createElement("span",{className:"measure-text"},e("Measure.area")))):a.createElement(a.Fragment,null)},Rt=n(35818),_t={};_t.styleTagTransform=se(),_t.setAttributes=re(),_t.insert=ne().bind(null,"head"),_t.domAPI=ee(),_t.insertStyleElement=oe();Y()(Rt.Z,_t),Rt.Z&&Rt.Z.locals&&Rt.Z.locals;function zt(){return zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zt.apply(this,arguments)}var Bt=({...e})=>{const{t:t}=(0,j.$)(),n=(0,D.useMap)(),r=R(),l=z((e=>e.toolMenu.selectedKeys)),[o,i]=(0,a.useState)(!1),[s,c]=(0,a.useState)([]),[u,d]=(0,a.useState)(null);(0,a.useEffect)((()=>(s.includes("print")&&!u&&g(),()=>{u&&s.includes("print")&&(u.shutdownManager(),d(null))})),[s,u]);const p=e=>{if(!n)return;const t=e.get("name");return t&&!["react-geo_measure","hoverVectorLayer"].includes(t)&&e.getVisible()&&!(e instanceof m.default)&&Ne.default.layerInResolutionRange(e,n)},g=(0,a.useCallback)((async()=>{const e=new je.Cf({url:"/print",map:n,timeout:6e4,layerFilter:p,transformOpts:{rotate:!1}});await e.init().then((()=>{e.setOutputFormat(e.getOutputFormats()[0]),e.setDpi(e.getDpis()[0]),e.setLayout(e.getLayouts()[0]?.name)})).catch((e=>{L().error(e)})),d(e)}),[n,t]),f=e=>{i(!1),l.forEach((e=>r(q(e)))),c([e.key])},y=[{className:"measure",key:"measure_tools",icon:a.createElement(Ie.FontAwesomeIcon,{icon:Oe.KxN}),label:t("ToolMenu.measure"),children:[{key:"measure-panel",label:a.createElement(Dt,null)}]},{key:"feature_info",onTitleClick:f,icon:a.createElement(Ie.FontAwesomeIcon,{icon:Oe.kwz}),label:t("ToolMenu.featureInfo"),children:[{key:"feature-info-panel",label:a.createElement(vt,{enabled:s.includes("feature_info")})}]},{key:"print",onTitleClick:f,icon:a.createElement(Ie.FontAwesomeIcon,{icon:Oe.kwI}),label:t("ToolMenu.print"),children:[{key:"print-panel",label:a.createElement(Je,{printManager:u,map:n})}]},{className:"tree",key:"tree",onTitleClick:f,icon:a.createElement(Ie.FontAwesomeIcon,{icon:Oe.aC2}),label:t("ToolMenu.layertree"),children:[{key:"tree-panel",label:a.createElement("div",{className:"tree-wrapper"},a.createElement(Ot,null),a.createElement(T.default,{className:"add-wms-button tool-menu-button",icon:a.createElement(Ie.FontAwesomeIcon,{icon:Oe.r8p}),onClick:()=>r(V())},t("ToolMenu.addWms")))}]},{key:"expand_collapse",label:t(o?"ToolMenu.expand":"ToolMenu.collapse"),icon:o?a.createElement(Ie.FontAwesomeIcon,{icon:Oe._tD}):a.createElement(Ie.FontAwesomeIcon,{icon:Oe.A35})}];return a.createElement("div",{className:"tool-menu"},a.createElement(xe.Z,zt({mode:"inline",inlineCollapsed:o,onSelect:e=>{if("expand_collapse"===e.key)i(!o)},onDeselect:e=>{if("expand_collapse"===e.key)i(!o)},openKeys:s,onOpenChange:e=>{o&&(e=e.filter((e=>"measure_tools"===e||"expand_collapse"===e))),c(e)},multiple:!0,selectedKeys:l,items:y},e)))},Kt=n(65705),Vt={};Vt.styleTagTransform=se(),Vt.setAttributes=re(),Vt.insert=ne().bind(null,"head"),Vt.domAPI=ee(),Vt.insertStyleElement=oe();Y()(Kt.Z,Vt),Kt.Z&&Kt.Z.locals&&Kt.Z.locals;function $t(){return $t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$t.apply(this,arguments)}var Gt=({...e})=>a.createElement("div",$t({className:"App"},e),a.createElement(Te,null),a.createElement(fe,null),a.createElement(Bt,null),a.createElement(ke,null),a.createElement(me,null)),Wt=n(36609),Ut=n(26071),Ht=n(68718);Wt.ZP.use(Ut.Z).use(Ht.Db).init({resources:{de:{translation:{AddLayerModal:{addSelectedLayers:"Auswahl hinzufÃ¼gen",addAllLayers:"Alle hinzufÃ¼gen",inputPlaceholder:"WMS GetCapabilities URL angebenâ¦",externalWmsFolder:"Externe Themen",title:"WMS hinzufÃ¼gen",columnTitle:"Name",errorMessage:"Fehler",errorDescription:"Das Capabilities Dokument konnte nicht geladen werden, bitte prÃ¼fen Sie die URL"},Measure:{title:"Messen",line:"Entfernung",area:"FlÃ¤che",clicktodrawline:"Zum Zeichnen einer Linie klicken",clicktodrawarea:"Zum Zeichnen einer FlÃ¤che klicken"},FeatureInfo:{usageHint:"Klicken Sie in die Karte, um Detailinformationen zu erhalten."},LayerTree:{transparency:"Transparenz",externalWmsFolder:"Externe Dienste",noLegendAvailable:"Keine Legende verfÃ¼gbar"},LayerTreeContextMenu:{layerZoomToExtent:"Auf Layerausdehnung zoomen",extentError:"Konnte nicht auf die Layerausdehnung zoomen",removeLayer:"Layer entfernen",showLegend:"Legende anzeigen",hideLegend:"Legende ausblenden"},ToolMenu:{expand:"Menu ausklappen",collapse:"Menu einklappen",measure:"Messen",featureInfo:"Karteninhalte abfragen",addWms:"WMS hinzufÃ¼gen",print:"Export",layertree:"Karten"},PrintForm:{title:"Kartentitel",initialTitle:"Druckausgabe",titlePlaceholder:"Bitte geben Sie einen Titel ein",comment:"Bemerkung",commentPlaceholder:"Bitte geben Sie einen Kommentar ein",layout:"Vorlage",dpi:"AuflÃ¶sung",format:"Format",downloadBtnText:"Ausdruck erzeugen",printJobErrorMsg:"Der Kartenausdruck konnte nicht erzeugt werden",initErrorMsg:"Der Kartendruck Generator konnte nicht initialisiert werden.",outputFormatPlaceholder:"Bitte wÃ¤hlen Sie ein Ausgabeformat aus",resolutionPlaceholder:"Bitte wÃ¤hlen Sie eine AusgabequalitÃ¤t aus"},Footer:{refSystem:"Bezugssystem",scale:"MaÃstab",mousePosition:"Mausposition",imprint:"Impressum",contact:"Kontakt",privacypolicy:"Datenschutz"},Index:{applicationLoadErrorMessage:"Fehler beim Laden der Applikation",applicationLoadErrorDescription:"Die Applikation mit der ID {{applicationId}} konnte nicht geladen werden. Die Standardkonfiguration wird stattdessen geladen.",errorMessage:"Fehler beim Laden der Applikation",errorDescription:"Aufgrund eines unerwarteten Fehlers konnte die Applikation nicht geladen werden. Bitte laden Sie die Seite erneut."},Nominatim:{placeholder:"Ortsname, StraÃenname, Stadtteilname, POI usw."},Drawer:{title:"Themen"}}},en:{translation:{AddLayerModal:{addSelectedLayers:"Add selected",addAllLayers:"Add all",inputPlaceholder:"Enter a WMS GetCapabilities URLâ¦",externalWmsFolder:"External layers",title:"Add WMS",columnTitle:"Name",errorMessage:"Error",errorDescription:"Could not load the provided Capabilities document, please check the validity of the URL"},Measure:{title:"Measure",line:"Distance",area:"Area",clicktodrawline:"Click to draw line",clicktodrawarea:"Click to draw area"},FeatureInfo:{usageHint:"Click on the map to get details about the clicked coordinate."},LayerTree:{transparency:"Transparency",externalWmsFolder:"External services",noLegendAvailable:"No legend available"},LayerTreeContextMenu:{layerZoomToExtent:"Zoom to layer extent",extentError:"Could not zoom to layer extent",removeLayer:"Remove layer",showLegend:"Show legend",hideLegend:"Hide legend"},ToolMenu:{expand:"Expand",collapse:"Collapse",measure:"Measure",featureInfo:"Query map features",addWms:"Add WMS",print:"Export",layertree:"Maps"},PrintForm:{title:"Title",initialTitle:"Title",titlePlaceholder:"Please input a titleâ¦",comment:"Comment",commentPlaceholder:"Please enter a commentâ¦",layout:"Layout",dpi:"Resolution",format:"Format",downloadBtnText:"Create print",printJobErrorMsg:"Could not generate PDF output",initErrorMsg:"PDF Generator could not be initialized",outputFormatPlaceholder:"Please select an output format",resolutionPlaceholder:"Please select an output quality"},Footer:{refSystem:"Reference system",scale:"Scale",mousePosition:"Mouse position",imprint:"Imprint",contact:"Contact",privacypolicy:"Privacy"},Index:{applicationLoadErrorMessage:"Error while loading the application",applicationLoadErrorDescription:"The application with ID {{applicationId}} could not be loaded correctly. You're seeing the default application configuration.",errorMessage:"Error while loading the application",errorDescription:"An unexpected error occured while loading the application. Please try to reload the page."},Nominatim:{placeholder:"Place name, street name, district name, POI, etc."},Drawer:{title:"Layers"}}}},fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},supportedLngs:["de","en"]});var qt=Wt.ZP;const Jt=(0,B.oM)({name:"logoPath",initialState:"/loading.png",reducers:{setLogoPath:(e,t)=>t.payload}}),{setLogoPath:Xt}=Jt.actions;var Yt=Jt.reducer;const Qt=(0,B.oM)({name:"title",initialState:"SHOGun Client",reducers:{setTitle:(e,t)=>t.payload}}),{setTitle:en}=Qt.actions;var tn=Qt.reducer;const nn=(0,B.xC)({reducer:{title:tn,logoPath:Yt,toolMenu:J,addLayerModal:W}});var an=n(90978),rn={};rn.styleTagTransform=se(),rn.setAttributes=re(),rn.insert=ne().bind(null,"head"),rn.domAPI=ee(),rn.insertStyleElement=oe();Y()(an.Z,rn),an.Z&&an.Z.locals&&an.Z.locals;var ln=class{static async logout(){try{const e=await fetch("/geoserver/j_spring_security_logout",{credentials:"include",mode:"no-cors",method:"POST",redirect:"manual"});if(e.ok)return Promise.resolve(!0);throw new Error(`Error while logging out from GeoServer. Status: ${e.status}, Message: ${e.statusText}`)}catch(e){return Promise.reject(e)}}static async getGeoServerSession(e=0){try{const t=await fetch("/geoserver/www/getsession.json",{credentials:"include",mode:"no-cors"});if(t.status<=0){const t=()=>new Promise((t=>setTimeout(t,e)));return await t(),Promise.resolve(!0)}if(t.ok)return Promise.resolve(!0);throw new Error("Error while getting a GeoServer session")}catch(e){return Promise.reject(e)}}};const on=new(C())({url:u().appPrefix||"/"}),sn=new(Z())({client:on}),cn=e=>{switch(e){case"en":default:return s.Z;case"de":return i.Z}},un=async e=>{const t=await sn.parseMapView(e),n=await sn.parseLayerTree(e);return new g.default({view:t,layers:n,controls:(0,d.ce)({zoom:!1})})},dn=()=>{const e=new p.default({source:new y.default});e.set("name","OpenStreetMap");const t=new p.default({opacity:.5,visible:!0,source:new h.default({url:"https://gibs.earthdata.nasa.gov/wms/epsg3857/best/wms.cgi",projection:"EPSG:3857",params:{LAYERS:"MERRA2_2m_Air_Temperature_Assimilated_Monthly"}})});t.setProperties({name:"2-meter Air Temperature, Assimilated (Monthly, MERRA2)",hoverable:!0});const n=new m.default({layers:[t]});n.set("name","NASA Earth Observations");const a=new m.default({layers:[e]});a.set("name","Background");const r=(0,f.fromLonLat)([0,40],"EPSG:3857");return new g.default({view:new E.default({center:r,zoom:0}),layers:[a,n],controls:(0,d.ce)({zoom:!1})})};(async()=>{try{const e=await(async()=>{const e=k().getQueryParam(window.location.href,"applicationId");if(!e)return void L().info("No application ID given, can't load any configuration.");let t;try{return L().info(`Loading application with ID ${e}`),t=await on.application().findOne(e),L().info(`Successfully loaded application with ID ${e}`),t}catch(t){L().error(`Error while loading application with ID ${e}: ${t}`),r.Z.error({message:qt.t("Index.applicationLoadErrorMessage"),description:qt.t("Index.applicationLoadErrorDescription",{applicationId:e}),duration:0})}})();u().loginToGeoServer&&await ln.getGeoServerSession();const t=(e=>{const t={"--primaryColor":"#59666C","--secondaryColor":"#70B3BE","--complementaryColor":"#FFFFFF"};return e?(e.primaryColor&&(t["--primaryColor"]=e.primaryColor),e.secondaryColor&&(t["--secondaryColor"]=e.secondaryColor),e.secondaryColor&&(t["--complementaryColor"]=e.complementaryColor),t):t})(e?.clientConfig?.theme);l.ZP.config({theme:{primaryColor:t["--primaryColor"]}}),nn.subscribe((()=>{document.title=nn.getState().title})),(async e=>{e?(e.name&&nn.dispatch(en(e.name)),e?.clientConfig?.theme?.logoPath&&nn.dispatch(Xt(e.clientConfig.theme.logoPath))):L().info("No application configuration provided, the default store will be loaded")})(e);const n=await(async e=>e?await un(e):(L().info("No application configuration provided, the default map will be loaded"),dn()))(e);(0,b.render)(a.createElement(a.StrictMode,null,a.createElement(a.Suspense,{fallback:a.createElement("span",null)},a.createElement(l.ZP,{locale:cn(qt.language)},a.createElement(v.zt,{store:nn},a.createElement(S.default.Provider,{value:n},a.createElement(Gt,{style:t})))))),document.getElementById("app"))}catch(e){L().error(e),(0,b.render)(a.createElement(a.StrictMode,null,a.createElement(o.Z,{className:"error-boundary",message:qt.t("Index.errorMessage"),description:qt.t("Index.errorDescription"),type:"error",showIcon:!0})),document.getElementById("app"))}})()},65705:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},6192:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},78415:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},62923:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},87650:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},86092:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},16813:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},79770:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},85415:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},35818:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},90978:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o}}]);
//# sourceMappingURL=common.fb4a98d2c6ca16cd38c8.js.map